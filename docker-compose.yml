version: '2'

services:
  react:
    extends:
      file: docker-compose-base.yml
      service: react
    volumes:
      - ./react_frontend:/app
      - react_build:/app/dist
    env_file:
      - dev.env
    ports:
      - "3000:8000"
      - "35729:35729"
  nginx_proxy:
    extends:
      file: docker-compose-base.yml
      service: nginx_proxy
    env_file:
      - dev.env
    volumes:
      - react_build:/usr/share/nginx/html
    ports:
      - "81:80"
  caddy_proxy:
    extends:
      file: docker-compose-base.yml
      service: caddy_proxy
    volumes:
      - react_build:/caddy_server/react_build
    env_file:
      - dev.env
    ports:
      - "80:80"

volumes:
    react_build:
